{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampusHome - Add Listing</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/Add_listing.css' %}">

    {% comment %} Font awesome link {% endcomment %}
    <script src="{% static 'fontawesomefree/js/all.min.js' %}"></script>
    <link href="{% static 'fontawesomefree/css/all.min.css' %}"  rel="stylesheet" type="text/css"/>
</head>
<body>
    <header>
        <div class="header-area">
     
             <h1 class='site_logo'>CampusHome</h1>
             <!-- Navigation bar with links to sign in and create account pages -->
             <nav id='nav'>
                 <ul>

                  <li><a href="">Dashboard</a></li>
                  <li class= id='round'><a href=""> <i class="fa-solid fa-user" id='i' > </i><i class="fa-solid fa-caret-down"></i></a></li>
                     
                    
                 </ul>
             </nav>
        </div>
     </header>
     <main>
        <div class="text">
          <h1>Add a New Accommodation</h1>
        <p>Add a new accomodation listing to CampusHome</p>
        </div>

        


        <!-- add accomodation form -->

        
        <div class="form-container">
          <div id="error-message" style='display:none'>
            <p>Pllease, fill the form before proceeding to the next page</p>
           <button id='close_btn'>X</button>
          </div>
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            {% comment %} FIRST FORM PAGE {% endcomment %}
            <div id="page-1">
              
              <label>{{ form.state.label }}</label>
              {{ form.state }}
              <br>
              <label>{{ form.school.label }}</label>
              {{ form.school }}
              <br>
              <label>{{ form.LGA.label }}</label>
              {{ form.LGA }}
              <br>
              <label>{{ form.Hostel_name.label }}</label>
              {{ form.Hostel_name }}
              <br>
              <label>{{ form.price.label }}</label>
              {{ form.price }}
              
              
              <button type="button" class="btn btn-primary" onclick="showPage(2)">Next</button>
            </div>

            {% comment %} SECOND FORM PAGE {% endcomment %}

            <div id="page-2" style="display:none;">

              <div class="upload_div">
                <div class="img-area">
                  <i class="fa-solid fa-cloud-arrow-up upload_img"></i>
                  <input type="file" name="image_1" accept='image/*' style='display:none;' class='file group-1'>
                  <p>upload images of accomodations</p>
                  <p class="caption"></p>
                  <p></p>
                </div>
                <button type='button' class='upload_btn'>Select image</button>
              </div>
              <br>
              <div class="smaller-images">
                <div class="upload_div">
                  <div class="img-area">
                    <i class="fa-solid fa-cloud-arrow-up upload_img"></i>
                    <input type="file" name="image_2" accept='image/*' style='display:none;' class='file'>
                    <p>upload images of accomodations</p>
                    <p></p>
                  </div>
                  <button type='button' class='upload_btn '>Select image</button>
                </div>
                <div class="upload_div">
                  <div class="img-area">
                    <i class="fa-solid fa-cloud-arrow-up upload_img"></i>
                    <input type="file" name="image_3" accept='image/*' style='display:none;' class='file '>
                    {% comment %} <img src="{% static 'images/abuad.jpg' %}" alt=""> {% endcomment %}
                    <p>upload images of accomodations</p>
                    <p></p>
                  </div>
                  <button type='button' class='upload_btn'>Select image</button>
                </div>
                <div class="upload_div">
                  <div class="img-area">
                    <i class="fa-solid fa-cloud-arrow-up upload_img"></i>
                    <input type="file" name="image_4" accept='image/*' style='display:none;' class='file'>
                    <p>upload images of accomodations</p>
                    <p></p>
                  </div>
                  <button type='button' class='upload_btn'>Select image</button>
                </div>
              </div>
              <label>{{ form.description.label }}</label>
              {{ form.description }}

              
              <br>
              <button type="button" class="btn btn-secondary" onclick="showPage(1)">Previous</button>
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </form>
        </div>
        
     
        
        <script src="{% static 'script.js' %}"></script> 
        <script>

          //close the error message
              var closeBtn = document.getElementById('close_btn') 
              var errMsg = document.getElementById('error-message')

                    // Add a click event listener to the "close" button
                    closeBtn.addEventListener('click', function() {
                          // Hide the error message
                    errMsg.style.display = 'none';
                    });

              
                    const selectBtn = document.querySelector('.upload_btn')
                    const inputFile = document.querySelector('.file')
                    const imgArea = document.querySelector('.img-area')
                    
                    selectBtn.addEventListener('click',function(){
                      inputFile.click()
                    })
                    
                    inputFile.addEventListener('change', function(){
                      const image = this.files[0]
                      console.log(image)
                      const reader = new FileReader();
                      reader.onload = () =>{
                        const imgUrl = reader.result
                        const img = document.createElement('img');
                        img.src = imgUrl;
                        img.title = image.name; // set the title attribute to the file name
                        imgArea.appendChild(img)
                      }
                      reader.readAsDataURL(image) 
                    })
                    

        </script>
</body>
</html>